---
layout:     post
title:      n1 u盘启动openwrt做二级路由
subtitle:   n1作为AP模式发射wifi
date:      2019-11-08
author:     "jkdigger"
header-img: 
catalog: true
tags:
    -  n1刷机
---

## 前言
n1用网线连接主路由Lan口,发射wifi热点。此时n1的openwrt系统设置为AP模式，即把n1作为无线交换机使用。

登入n1 openwrt管理界面的ip地址与主路由有关。


## 实现
### 1. 准备工作
* u盘写入opebwrt固件，固件来自于[Pi&N1群](https://t.me/NewPiN1Channel) 分享的n1 openwrt mix70周年国庆特别版。

### 2. 连线
* n1用网线接到主路由
* 电脑用wifi也连接到相同主路由

> 不直接用网线连接n1和电脑的原因：一般从网上下载到的n1 openwrt固件默认DHCP模式，必须连接到主路由Lan口后才能正常登入和设置。

### 3. 登入openwrt系统
* 获取n1的ip

> 方法：
> 1. 登入路由器查看n1的ip 
> 2. 通过scanport软件查看n1的ip,设定扫描端口为22,起始ip为主路由ip,比如 192.168.5.1到192.168.5.255

* 浏览器输入n1 ip

> 用户名 root
> 密码 password

### 4. 设置wifi工作模式
* [无线]->[ssid]处点击[修改]
* [设备配置]->基本设置

> 无线模式 AC
> 1. legacy 2.4-2.5GHz 
> 2. AC 5GHz
> 3. N 只使用n协议
> 信道 36
> 频宽 80

### 5. 修改wifi名称
* 侧边栏->[网络]
* 点击[接口设置]->[基本设置]->ESSID处修改wifi名字

> 基本设置默认勾选项目
> 网络Lan
> WMM模式
> 弱信号删除

### 6. 修改wifi密码
* 侧边栏->[网络]
* [无线]->[接口配置]->[无线安全]

> 加密方式选择：WPA2-PSK
> 算法：自动
> 密码：自定义

* 点击[保存&应用]

### 7. 设置n1 openwrt静态ip（可选）
> 原因：
> 此时n1通过网线与主路由Lan口连接，处于AP模式。可以当作一个便携式路由来使用。
> 如果想设置一个固定的ip地址登入管理页面，静态地址即可，但这个地址与需要与主路由有关。

* [网络]->[接口]->修改[LAN]
* 选择[静态地址]->点击[切换协议]->修改3处地方

> 1. IPv4地址：192.168.5.3（我的主路由ip是192.168.5.1，这里设置与主路由不冲突的ip地址）
> 2. 子网掩码：255.255.255.0
> 3. IPv4网关：192.168.5.3（与n1的ip一致）


* 关闭n1 DHCP服务器：接上步，在[DHCP服务器]处：勾选[忽略此接口]

> 原因：主路由已经有DHCP服务器，所以需要关闭该服务。
