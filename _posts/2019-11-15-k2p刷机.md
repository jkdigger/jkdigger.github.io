---
layout:     post
title:      k2p刷机
subtitle:   
date:       2019-11-15 
author:     "jkdigger"
header-img: 
catalog: true
tags:
    - k2p刷机
---



## 前言

自从入了n1，然后又发现了k2p这款神器。两百元以内的价格，信号超好，可以跑满百兆的带宽。实际5g测速与网件r7000一样，但价格却只有r7000的三分之一。

 > k2p版本 a2 22.7.8.5 

## 准备工作

- [K2P_telnet工具]( https://pan.baidu.com/s/1pfKSDb6pKCq7v-M25QPBWg )
- [k2p老毛子固件发布地址](https://www.jianshu.com/p/d76a63a12eae)

## 刷入Breed

### 01 用网线连电脑 和 k2p LAN口

- [控制面板]->[程序功能]->[打开或关闭Windows功能] 

- 找到并勾选 [Telnet服务器 ]、[Telnet客户端]

> win7:Telnet服务器 和 Telnet客户端 都要勾选，win10勾选Telnet客户端

-  重启电脑
-  K2P默认IP是192.168.2.1，浏览器登录K2P的WEB管理页面完成配置引导，电脑使用DHCP上网的 选项的就不用分配IP；

> 如果选择使用静态IP上网的请配置IP:192.168.2.100、掩码:255.255.255.0、网关:192.168.2.1。 

-  打开[ K2P_telnet工具 ]->打开Telnet

> 显示 
>
> - 收到应答信号
> - 打开telnet完成

###  02 用网线连接k2p WAN口 和 主路由或光猫 

- win+r，输入如下命令

```
telnet 192.168.2.1
```

> 此时，跳出一个cmd界面。

- 次执行下列命令开始自动刷机： 

```
wget http://iytc.net/tools/k2p.sh -O /tmp/k2p.sh

chmod 755 /tmp/k2p.sh

/tmp/k2p.sh
```

- 等待出现rebooting字样，表示刷入完成
- 路由器断电，拔掉与主路由或光猫连接的网线

## 通过Breed刷入新固件

### 01 进入breed: 192.168.1.1

> 此时，网线一头连电脑，一头连路由器lan口。

- 路由器断电
- 按住reset-->上电-->十秒左右松手
- 浏览器中输入 `192.168.1.1 `进入Breed Web恢复控制台

### 02 恢复出厂设置

>  恢复出厂设置的原因
>
> - 如果不进行恢复出厂设置，上一个系统的设置参数，会保留到下一个系统里面 。

- 控制台中选择 [恢复出厂设置] 
- 固件类型:  [ Config（公版）]

> 选择什么固件类型
>
> - 老毛子、集客AC系统、TOMATO不死鸟，这三个系统的内核是一样  Config（公版）

- 点击 [执行]

### 03 刷入新固件

- 控制台中选择[固件更新]
- [固件]->点击 [选择文件]，此时[自动重启]自动勾选上

> hanwckf固件后缀名为trx
>

- 点击上传
- 更新完成后，点击电脑右下角网络状态

## 路由器设置

用网线连接光猫和k2p WAN口

### 01 登入路由器

> hanwckf固件
>
> - 默认域名：my.router；默认ip：192.168.2.1
> - 用户名/密码 = admin/admin

### 02 双清操作

> hanwckf固件
>
> - 每一次刷完后都一定要在"系统管理--配置管理"里恢复nvram以及/etc/storage 
> -  根据开网信息，修改wan口ip地址掩码网关DNS和mac**（去掉":"）**，并应用设置 

- 高级设置-系统管理-恢复/导出/上传设置
- 先清-脚本文件（下面的“重置”）
- 再清-路由器参数（上面“重置”）

### 03 输入宽带帐号密码

- [外部网络]->联网类型:PPPoE
- 输入用户名称和密码（宽带用户名和密码）
- 点击 [应用设置]

### 04 设置wifi名称密码

- 点击[高级设置]->2.4G无线
- 点击[高级设置]->5G无线

> 修改用户名和密码

## 参考资料

- [老毛子固件使用说明](https://www.jianshu.com/p/cb51fb0fb2ac)

